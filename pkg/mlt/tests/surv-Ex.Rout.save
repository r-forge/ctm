
R version 3.1.3 (2015-03-09) -- "Smooth Sidewalk"
Copyright (C) 2015 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> 
> library("mlt")
Loading required package: basefun
Loading required package: Matrix

Attaching package: 'Matrix'

The following objects are masked from 'package:base':

    crossprod, tcrossprod

Loading required package: polynom
Loading required package: numDeriv
> library("survival")
> set.seed(29)
> 
> y <- rexp(10)
> d <- rep(c(TRUE, FALSE), length = length(y))
> ### right
> (s <- Surv(y, d, type = "right"))
 [1] 2.67433818  1.45783672+ 0.16997763  2.56883009+ 0.65633521  0.08317242+
 [7] 0.20866373  1.79566143+ 0.65482017  0.32505510+
> attr(s, "type")
[1] "right"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
            time status       left right
 [1,] 2.67433818      1 2.67433818    NA
 [2,] 1.45783672      0 1.45783672   Inf
 [3,] 0.16997763      1 0.16997763    NA
 [4,] 2.56883009      0 2.56883009   Inf
 [5,] 0.65633521      1 0.65633521    NA
 [6,] 0.08317242      0 0.08317242   Inf
 [7,] 0.20866373      1 0.20866373    NA
 [8,] 1.79566143      0 1.79566143   Inf
 [9,] 0.65482017      1 0.65482017    NA
[10,] 0.32505510      0 0.32505510   Inf
> 
> ### right censored, left truncated
> (s <- Surv(y, y + 1, d))
 [1] (2.67433818,3.674338]  (1.45783672,2.457837+] (0.16997763,1.169978] 
 [4] (2.56883009,3.568830+] (0.65633521,1.656335]  (0.08317242,1.083172+]
 [7] (0.20866373,1.208664]  (1.79566143,2.795661+] (0.65482017,1.654820] 
[10] (0.32505510,1.325055+]
> attr(s, "type")
[1] "counting"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
           start     stop status     left right  lefttrunc
 [1,] 2.67433818 3.674338      1 3.674338    NA 2.67433818
 [2,] 1.45783672 2.457837      0 2.457837   Inf 1.45783672
 [3,] 0.16997763 1.169978      1 1.169978    NA 0.16997763
 [4,] 2.56883009 3.568830      0 3.568830   Inf 2.56883009
 [5,] 0.65633521 1.656335      1 1.656335    NA 0.65633521
 [6,] 0.08317242 1.083172      0 1.083172   Inf 0.08317242
 [7,] 0.20866373 1.208664      1 1.208664    NA 0.20866373
 [8,] 1.79566143 2.795661      0 2.795661   Inf 1.79566143
 [9,] 0.65482017 1.654820      1 1.654820    NA 0.65482017
[10,] 0.32505510 1.325055      0 1.325055   Inf 0.32505510
> 
> ### left censored
> (s <- Surv(y, d, type = "left"))
 [1]  2.67433818 <1.45783672  0.16997763 <2.56883009  0.65633521 <0.08317242
 [7]  0.20866373 <1.79566143  0.65482017 <0.32505510
> attr(s, "type")
[1] "left"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
            time status left      right
 [1,] 2.67433818      1   NA 2.67433818
 [2,] 1.45783672      0 -Inf 1.45783672
 [3,] 0.16997763      1   NA 0.16997763
 [4,] 2.56883009      0 -Inf 2.56883009
 [5,] 0.65633521      1   NA 0.65633521
 [6,] 0.08317242      0 -Inf 0.08317242
 [7,] 0.20866373      1   NA 0.20866373
 [8,] 1.79566143      0 -Inf 1.79566143
 [9,] 0.65482017      1   NA 0.65482017
[10,] 0.32505510      0 -Inf 0.32505510
> 
> ### interval
> dd <- rep(0:3, length = length(y))
> (s <- Surv(y, y + 1, dd, type = "interval"))
 [1] 2.67433818+            1.45783672             0.16997763-           
 [4] [2.56883009, 3.568830] 0.65633521+            0.08317242            
 [7] 0.20866373-            [1.79566143, 2.795661] 0.65482017+           
[10] 0.32505510            
> attr(s, "type")
[1] "interval"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
           time1    time2 status       left     right
 [1,] 2.67433818 1.000000      0 2.67433818       Inf
 [2,] 1.45783672 1.000000      1 1.45783672        NA
 [3,] 0.16997763 1.000000      2       -Inf 0.1699776
 [4,] 2.56883009 3.568830      3 2.56883009 3.5688301
 [5,] 0.65633521 1.000000      0 0.65633521       Inf
 [6,] 0.08317242 1.000000      1 0.08317242        NA
 [7,] 0.20866373 1.000000      2       -Inf 0.2086637
 [8,] 1.79566143 2.795661      3 1.79566143 2.7956614
 [9,] 0.65482017 1.000000      0 0.65482017       Inf
[10,] 0.32505510 1.000000      1 0.32505510        NA
> 
> ### interval2
> (s <- Surv(y, y + 1, type = "interval2"))
 [1] [2.67433818, 3.674338] [1.45783672, 2.457837] [0.16997763, 1.169978]
 [4] [2.56883009, 3.568830] [0.65633521, 1.656335] [0.08317242, 1.083172]
 [7] [0.20866373, 1.208664] [1.79566143, 2.795661] [0.65482017, 1.654820]
[10] [0.32505510, 1.325055]
> attr(s, "type")
[1] "interval"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
           time1    time2 status       left    right
 [1,] 2.67433818 3.674338      3 2.67433818 3.674338
 [2,] 1.45783672 2.457837      3 1.45783672 2.457837
 [3,] 0.16997763 1.169978      3 0.16997763 1.169978
 [4,] 2.56883009 3.568830      3 2.56883009 3.568830
 [5,] 0.65633521 1.656335      3 0.65633521 1.656335
 [6,] 0.08317242 1.083172      3 0.08317242 1.083172
 [7,] 0.20866373 1.208664      3 0.20866373 1.208664
 [8,] 1.79566143 2.795661      3 1.79566143 2.795661
 [9,] 0.65482017 1.654820      3 0.65482017 1.654820
[10,] 0.32505510 1.325055      3 0.32505510 1.325055
> 
> (s <- Surv(y, ifelse(d, Inf, y + 1), type = "interval2"))
 [1] [2.67433818,      Inf] [1.45783672, 2.457837] [0.16997763,      Inf]
 [4] [2.56883009, 3.568830] [0.65633521,      Inf] [0.08317242, 1.083172]
 [7] [0.20866373,      Inf] [1.79566143, 2.795661] [0.65482017,      Inf]
[10] [0.32505510, 1.325055]
> attr(s, "type")
[1] "interval"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
           time1    time2 status       left    right
 [1,] 2.67433818      Inf      3 2.67433818      Inf
 [2,] 1.45783672 2.457837      3 1.45783672 2.457837
 [3,] 0.16997763      Inf      3 0.16997763      Inf
 [4,] 2.56883009 3.568830      3 2.56883009 3.568830
 [5,] 0.65633521      Inf      3 0.65633521      Inf
 [6,] 0.08317242 1.083172      3 0.08317242 1.083172
 [7,] 0.20866373      Inf      3 0.20866373      Inf
 [8,] 1.79566143 2.795661      3 1.79566143 2.795661
 [9,] 0.65482017      Inf      3 0.65482017      Inf
[10,] 0.32505510 1.325055      3 0.32505510 1.325055
> 
> (s <- Surv(y, ifelse(d, NA, y + 1), type = "interval2"))
 [1] 2.67433818+            [1.45783672, 2.457837] 0.16997763+           
 [4] [2.56883009, 3.568830] 0.65633521+            [0.08317242, 1.083172]
 [7] 0.20866373+            [1.79566143, 2.795661] 0.65482017+           
[10] [0.32505510, 1.325055]
> attr(s, "type")
[1] "interval"
> cbind(unclass(s), mlt:::.Surv2matrix(s))
           time1    time2 status       left    right
 [1,] 2.67433818 1.000000      0 2.67433818      Inf
 [2,] 1.45783672 2.457837      3 1.45783672 2.457837
 [3,] 0.16997763 1.000000      0 0.16997763      Inf
 [4,] 2.56883009 3.568830      3 2.56883009 3.568830
 [5,] 0.65633521 1.000000      0 0.65633521      Inf
 [6,] 0.08317242 1.083172      3 0.08317242 1.083172
 [7,] 0.20866373 1.000000      0 0.20866373      Inf
 [8,] 1.79566143 2.795661      3 1.79566143 2.795661
 [9,] 0.65482017 1.000000      0 0.65482017      Inf
[10,] 0.32505510 1.325055      3 0.32505510 1.325055
> 
> ### new interface
> tm <- runif(10)
> e <- sample(c(TRUE, FALSE), length(tm), replace = TRUE)
> s <- Surv(tm, e)
> cbind(s, as.data.frame(mlt:::.Surv2matrix(s)))
            s      left right
1  0.3621201+ 0.3621201   Inf
2  0.8667453+ 0.8667453   Inf
3  0.3626263  0.3626263    NA
4  0.6658932  0.6658932    NA
5  0.6183130  0.6183130    NA
6  0.9728763  0.9728763    NA
7  0.9823095+ 0.9823095   Inf
8  0.6216898  0.6216898    NA
9  0.3513491  0.3513491    NA
10 0.4874011+ 0.4874011   Inf
> cbind(s, mlt:::.Surv2R(s))
            s tleft     cleft     exact cright tright
1  0.3621201+    NA 0.3621201        NA    Inf     NA
2  0.8667453+    NA 0.8667453        NA    Inf     NA
3  0.3626263     NA        NA 0.3626263     NA     NA
4  0.6658932     NA        NA 0.6658932     NA     NA
5  0.6183130     NA        NA 0.6183130     NA     NA
6  0.9728763     NA        NA 0.9728763     NA     NA
7  0.9823095+    NA 0.9823095        NA    Inf     NA
8  0.6216898     NA        NA 0.6216898     NA     NA
9  0.3513491     NA        NA 0.3513491     NA     NA
10 0.4874011+    NA 0.4874011        NA    Inf     NA
> 
> s <- Surv(tm, e, type = "left")
> cbind(s, as.data.frame(mlt:::.Surv2matrix(s)))
            s left     right
1  <0.3621201 -Inf 0.3621201
2  <0.8667453 -Inf 0.8667453
3   0.3626263   NA 0.3626263
4   0.6658932   NA 0.6658932
5   0.6183130   NA 0.6183130
6   0.9728763   NA 0.9728763
7  <0.9823095 -Inf 0.9823095
8   0.6216898   NA 0.6216898
9   0.3513491   NA 0.3513491
10 <0.4874011 -Inf 0.4874011
> cbind(s, mlt:::.Surv2R(s))
            s tleft cleft     exact    cright tright
1  <0.3621201    NA  -Inf        NA 0.3621201     NA
2  <0.8667453    NA  -Inf        NA 0.8667453     NA
3   0.3626263    NA    NA 0.3626263        NA     NA
4   0.6658932    NA    NA 0.6658932        NA     NA
5   0.6183130    NA    NA 0.6183130        NA     NA
6   0.9728763    NA    NA 0.9728763        NA     NA
7  <0.9823095    NA  -Inf        NA 0.9823095     NA
8   0.6216898    NA    NA 0.6216898        NA     NA
9   0.3513491    NA    NA 0.3513491        NA     NA
10 <0.4874011    NA  -Inf        NA 0.4874011     NA
> 
> s <- Surv(tm, tm + 1, type = "interval2")
> cbind(s, as.data.frame(mlt:::.Surv2matrix(s)))
                       s      left    right
1  [0.3621201, 1.362120] 0.3621201 1.362120
2  [0.8667453, 1.866745] 0.8667453 1.866745
3  [0.3626263, 1.362626] 0.3626263 1.362626
4  [0.6658932, 1.665893] 0.6658932 1.665893
5  [0.6183130, 1.618313] 0.6183130 1.618313
6  [0.9728763, 1.972876] 0.9728763 1.972876
7  [0.9823095, 1.982309] 0.9823095 1.982309
8  [0.6216898, 1.621690] 0.6216898 1.621690
9  [0.3513491, 1.351349] 0.3513491 1.351349
10 [0.4874011, 1.487401] 0.4874011 1.487401
> cbind(s, mlt:::.Surv2R(s))
                       s tleft     cleft exact   cright tright
1  [0.3621201, 1.362120]    NA 0.3621201    NA 1.362120     NA
2  [0.8667453, 1.866745]    NA 0.8667453    NA 1.866745     NA
3  [0.3626263, 1.362626]    NA 0.3626263    NA 1.362626     NA
4  [0.6658932, 1.665893]    NA 0.6658932    NA 1.665893     NA
5  [0.6183130, 1.618313]    NA 0.6183130    NA 1.618313     NA
6  [0.9728763, 1.972876]    NA 0.9728763    NA 1.972876     NA
7  [0.9823095, 1.982309]    NA 0.9823095    NA 1.982309     NA
8  [0.6216898, 1.621690]    NA 0.6216898    NA 1.621690     NA
9  [0.3513491, 1.351349]    NA 0.3513491    NA 1.351349     NA
10 [0.4874011, 1.487401]    NA 0.4874011    NA 1.487401     NA
> 
> s <- Surv(tm, tm + 1, sample(0:3, length(tm), replace = TRUE), type = "interval")
> cbind(s, as.data.frame(mlt:::.Surv2matrix(s)))
                       s      left     right
1              0.3621201 0.3621201        NA
2              0.8667453 0.8667453        NA
3             0.3626263+ 0.3626263       Inf
4             0.6658932-      -Inf 0.6658932
5             0.6183130+ 0.6183130       Inf
6  [0.9728763, 1.972876] 0.9728763 1.9728763
7             0.9823095-      -Inf 0.9823095
8             0.6216898+ 0.6216898       Inf
9  [0.3513491, 1.351349] 0.3513491 1.3513491
10 [0.4874011, 1.487401] 0.4874011 1.4874011
> cbind(s, mlt:::.Surv2R(s))
                       s tleft     cleft     exact    cright tright
1              0.3621201    NA        NA 0.3621201        NA     NA
2              0.8667453    NA        NA 0.8667453        NA     NA
3             0.3626263+    NA 0.3626263        NA       Inf     NA
4             0.6658932-    NA      -Inf        NA 0.6658932     NA
5             0.6183130+    NA 0.6183130        NA       Inf     NA
6  [0.9728763, 1.972876]    NA 0.9728763        NA 1.9728763     NA
7             0.9823095-    NA      -Inf        NA 0.9823095     NA
8             0.6216898+    NA 0.6216898        NA       Inf     NA
9  [0.3513491, 1.351349]    NA 0.3513491        NA 1.3513491     NA
10 [0.4874011, 1.487401]    NA 0.4874011        NA 1.4874011     NA
> 
> s <- Surv(tm, tm + 1, e, type = "counting")
> cbind(s, as.data.frame(mlt:::.Surv2matrix(s)))
                       s     left right lefttrunc
1  (0.3621201,1.362120+] 1.362120   Inf 0.3621201
2  (0.8667453,1.866745+] 1.866745   Inf 0.8667453
3   (0.3626263,1.362626] 1.362626    NA 0.3626263
4   (0.6658932,1.665893] 1.665893    NA 0.6658932
5   (0.6183130,1.618313] 1.618313    NA 0.6183130
6   (0.9728763,1.972876] 1.972876    NA 0.9728763
7  (0.9823095,1.982309+] 1.982309   Inf 0.9823095
8   (0.6216898,1.621690] 1.621690    NA 0.6216898
9   (0.3513491,1.351349] 1.351349    NA 0.3513491
10 (0.4874011,1.487401+] 1.487401   Inf 0.4874011
> cbind(s, mlt:::.Surv2R(s))
                       s     tleft    cleft    exact cright tright
1  (0.3621201,1.362120+] 0.3621201 1.362120       NA    Inf     NA
2  (0.8667453,1.866745+] 0.8667453 1.866745       NA    Inf     NA
3   (0.3626263,1.362626] 0.3626263       NA 1.362626     NA     NA
4   (0.6658932,1.665893] 0.6658932       NA 1.665893     NA     NA
5   (0.6183130,1.618313] 0.6183130       NA 1.618313     NA     NA
6   (0.9728763,1.972876] 0.9728763       NA 1.972876     NA     NA
7  (0.9823095,1.982309+] 0.9823095 1.982309       NA    Inf     NA
8   (0.6216898,1.621690] 0.6216898       NA 1.621690     NA     NA
9   (0.3513491,1.351349] 0.3513491       NA 1.351349     NA     NA
10 (0.4874011,1.487401+] 0.4874011 1.487401       NA    Inf     NA
> 
> R(gl(3, 2, ordered = TRUE))
  tleft cleft exact cright tright
1    NA  <NA>    NA      1     NA
2    NA  <NA>    NA      1     NA
3    NA     1    NA      2     NA
4    NA     1    NA      2     NA
5    NA     2    NA   <NA>     NA
6    NA     2    NA   <NA>     NA
> R(0:10)
   tleft cleft exact cright tright
1     NA    NA    NA      0     NA
2     NA     0    NA      1     NA
3     NA     1    NA      2     NA
4     NA     2    NA      3     NA
5     NA     3    NA      4     NA
6     NA     4    NA      5     NA
7     NA     5    NA      6     NA
8     NA     6    NA      7     NA
9     NA     7    NA      8     NA
10    NA     8    NA      9     NA
11    NA     9    NA     10     NA
> 
> 
> proc.time()
   user  system elapsed 
  1.717   0.064   1.764 
